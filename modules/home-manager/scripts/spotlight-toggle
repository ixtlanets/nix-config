#!/usr/bin/env bash

SPOTLIGHT_STATE_FILE="/tmp/spotlight_state"
SPOTLIGHT_OVERLAY_SCRIPT="$(dirname "$0")/spotlight-overlay"

# Check if spotlight is already active
if [ -f "$SPOTLIGHT_STATE_FILE" ]; then
    # Spotlight is active, deactivate it
    rm -f "$SPOTLIGHT_STATE_FILE"
    pkill -f "spotlight-overlay" 2>/dev/null || true
    hyprctl dispatch closewindow "title:spotlight-overlay" 2>/dev/null || true
else
    # Spotlight is inactive, activate it
    echo "active" > "$SPOTLIGHT_STATE_FILE"
    "$SPOTLIGHT_OVERLAY_SCRIPT" &
fi